<p style="color: green"><%= notice %></p>

<%= form_with url: books_path, method: :get, class: "flex items-center space-x-2" do |form| %>
  <div class="flex flex-wrap items-stretch w-full">
    <%# q for query %>
    <%= form.text_field :q, value: params[:q], placeholder: "Search", class: "flex-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-300 focus:ring focus:ring-indigo-200 focus:ring-opacity-50" %>
  </div>
  <%= form.submit "Search", class: "px-4 py-2 bg-blue-500 text-white font-semibold rounded-md hover:bg-blue-700" %>
<% end %>


<table class='min-w-full table-auto'>
  <thead class="bg-gray-100">
    <tr>
      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Author</th>
      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Publisher</th>
      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Genre</th>

      <th colspan=3 class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
    </tr>
  </thead>
  <tbody class="bg-white divide-y divide-gray-200">
    <% @books.each do |book| %>
      <tr>
        <td class="px-6 py-4 whitespace-nowrap"><%= highlight(book.title, query_array) %></td>
        <td class="px-6 py-4 whitespace-nowrap"><%= highlight(book.author.name, query_array) %></td>
        <td class="px-6 py-4 whitespace-nowrap"><%= highlight(book.publisher.name, query_array) %></td>
        <td class="px-6 py-4 whitespace-nowrap"><%= highlight(book.genre.name, query_array) %></td>

        <td class="px-6 py-4 whitespace-nowrap"><%= link_to "Show", book_path(book), class: "text-indigo-600 hover:text-indigo-900" %></td>
        <td class="px-6 py-4 whitespace-nowrap"><%= link_to "Edit", edit_book_path(book), class: "text-indigo-600 hover:text-indigo-900" %></td>
        <td class="px-6 py-4 whitespace-nowrap"><%= link_to "Delete", book_path(book), method: :delete, data: { confirm: 'Are you sure?' }, class: "text-red-600 hover:text-red-900" %></td>
      </tr>
    <% end %>
  </tbody>
</table>


<%# paginate @books %>
<%= link_to_prev_page @books, 'Previous Page', class: 'px-4 py-2 border border-blue-500 text-blue-500 hover:bg-blue-500 hover:text-white transition-colors duration-150' %>
<%= link_to_next_page @books, 'Next Page', class: 'px-4 py-2 border border-blue-500 text-blue-500 hover:bg-blue-500 hover:text-white transition-colors duration-150' %>
<br>
<%= link_to "New book", new_book_path %>
